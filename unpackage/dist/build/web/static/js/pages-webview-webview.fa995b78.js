(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-webview-webview"],{"0aab":function(n,e,o){var t=o("c86c");e=t(!1),e.push([n.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.webview-container[data-v-3f7c91b2]{height:100vh;display:flex;flex-direction:column;background:#fff}.nav-bar[data-v-3f7c91b2]{height:%?88?%;display:flex;align-items:center;justify-content:space-between;padding:0 %?20?%;background:#fff;border-bottom:%?1?% solid #e5e5e5;position:relative;z-index:1000}.nav-left[data-v-3f7c91b2]{display:flex;align-items:center;cursor:pointer;position:relative}.back-icon[data-v-3f7c91b2]{font-size:%?36?%;color:#333;margin-right:%?8?%}.back-text[data-v-3f7c91b2]{font-size:%?28?%;color:#333}.event-overlay[data-v-3f7c91b2]{position:absolute;top:0;left:0;right:0;bottom:0;background:transparent;z-index:10}.nav-title[data-v-3f7c91b2]{font-size:%?32?%;font-weight:700;color:#333;flex:1;text-align:center}.nav-right[data-v-3f7c91b2]{display:flex;align-items:center}.refresh-icon[data-v-3f7c91b2]{font-size:%?32?%;color:#333;cursor:pointer}.loading-overlay[data-v-3f7c91b2]{position:fixed;top:%?88?%;left:0;right:0;bottom:0;background:hsla(0,0%,100%,.9);display:flex;align-items:center;justify-content:center;z-index:999}.loading-content[data-v-3f7c91b2]{text-align:center}.loading-text[data-v-3f7c91b2]{font-size:%?28?%;color:#666}',""]),n.exports=e},"0c62":function(n,e,o){"use strict";o("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,o("fd3c");var t={data:function(){return{url:"",title:"",loading:!0,fromPage:"",webviewStyles:{progress:{color:"#007aff"}},isReturning:!1,webviewKey:0}},onLoad:function(n){var e=this;console.log("WebView页面加载，参数:",n),n.url&&(this.url=decodeURIComponent(n.url),console.log("加载URL:",this.url)),n.title&&(this.title=decodeURIComponent(n.title)),n.from&&(this.fromPage=decodeURIComponent(n.from),console.log("记录来源页面:",this.fromPage));var o=getCurrentPages();console.log("当前页面栈:",o.map((function(n){return n.route}))),console.log("页面栈长度:",o.length),this.url||(uni.showToast({title:"无效的URL",icon:"none"}),setTimeout((function(){e.goBack()}),1500)),this.interceptBackEvent()},onShow:function(){console.log("WebView页面显示"),this.interceptBackEvent()},onHide:function(){console.log("WebView页面隐藏")},onUnload:function(){console.log("WebView页面卸载")},methods:{goBack:function(){var n=this;if(console.log("=== 开始返回操作 ==="),console.log("来源页面:",this.fromPage),this.isReturning)console.log("正在返回中，忽略重复点击");else{this.isReturning=!0;var e=getCurrentPages();console.log("当前页面栈:",e.map((function(n){return n.route}))),console.log("页面栈长度:",e.length),console.log("直接使用reLaunch回到登录页面"),setTimeout((function(){uni.reLaunch({url:"/pages/login/login",success:function(){console.log("reLaunch到登录页面成功"),n.isReturning=!1},fail:function(e){console.error("reLaunch到登录页面失败:",e),n.isReturning=!1,n.tryAlternativeReturn()}})}),100),setTimeout((function(){n.isReturning&&(console.log("返回操作超时，强制重置状态"),n.isReturning=!1)}),5e3)}},preventWebviewDefault:function(){console.log("尝试阻止webview的默认行为");try{this.webviewKey++,console.log("强制重新渲染webview，key:",this.webviewKey),this.url&&console.log("尝试注入JavaScript阻止默认行为")}catch(n){console.log("阻止webview默认行为失败:",n)}},tryAlternativeReturn:function(){console.log("=== 尝试备用返回方案 ==="),uni.switchTab({url:"/pages/index/index",success:function(){console.log("switchTab到首页成功")},fail:function(n){console.error("switchTab到首页失败:",n),uni.showToast({title:"返回失败，请手动返回",icon:"none",duration:3e3})}})},refresh:function(){this.loading=!0,this.$forceUpdate()},handleMessage:function(n){console.log("WebView消息:",n)},handleError:function(n){console.error("WebView错误:",n),uni.showToast({title:"页面加载失败",icon:"none"})},handleLoading:function(n){console.log("WebView加载状态:",n),n.detail&&"complete"===n.detail.readyState&&(this.loading=!1)},handleNavigation:function(n){console.log("WebView导航事件:",n)},handleRedirect:function(n){console.log("WebView重定向事件:",n)},interceptBackEvent:function(){var n=this;console.log("拦截页面返回事件"),"function"===typeof uni.onBackPress?uni.onBackPress((function(e){return console.log("收到页面返回事件"),n.isReturning?(console.log("正在返回中，忽略页面返回事件"),!0):(n.goBack(),!0)})):(console.log("uni.onBackPress不存在，使用其他方法"),this.interceptPageBack())},interceptPageBack:function(){console.log("使用页面级别的返回拦截")},onTouchStart:function(){console.log("自定义返回按钮触摸开始"),this.isReturning=!0},onTouchEnd:function(){var n=this;console.log("自定义返回按钮触摸结束"),setTimeout((function(){n.isReturning=!1}),500)},onTouchCancel:function(){console.log("自定义返回按钮触摸取消"),this.isReturning=!1},onMouseDown:function(){console.log("自定义返回按钮鼠标按下"),this.isReturning=!0},onMouseUp:function(){var n=this;console.log("自定义返回按钮鼠标释放"),setTimeout((function(){n.isReturning=!1}),500)}}};e.default=t},"14f5":function(n,e,o){"use strict";o.d(e,"b",(function(){return t})),o.d(e,"c",(function(){return i})),o.d(e,"a",(function(){}));var t=function(){var n=this,e=n.$createElement,o=n._self._c||e;return o("v-uni-view",{staticClass:"webview-container"},[o("v-uni-view",{staticClass:"nav-bar"},[o("v-uni-view",{staticClass:"nav-left",on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.goBack.apply(void 0,arguments)},touchstart:function(e){arguments[0]=e=n.$handleEvent(e),n.onTouchStart.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=n.$handleEvent(e),n.onTouchEnd.apply(void 0,arguments)},touchcancel:function(e){arguments[0]=e=n.$handleEvent(e),n.onTouchCancel.apply(void 0,arguments)},mousedown:function(e){arguments[0]=e=n.$handleEvent(e),n.onMouseDown.apply(void 0,arguments)},mouseup:function(e){arguments[0]=e=n.$handleEvent(e),n.onMouseUp.apply(void 0,arguments)}}},[o("v-uni-text",{staticClass:"back-icon"},[n._v("←")]),o("v-uni-text",{staticClass:"back-text"},[n._v("返回")]),o("v-uni-view",{staticClass:"event-overlay",on:{click:function(e){e.stopPropagation(),arguments[0]=e=n.$handleEvent(e),n.goBack.apply(void 0,arguments)}}})],1),o("v-uni-view",{staticClass:"nav-title"},[n._v(n._s(n.title||"网页"))]),o("v-uni-view",{staticClass:"nav-right",on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.refresh.apply(void 0,arguments)}}},[o("v-uni-text",{staticClass:"refresh-icon"},[n._v("↻")])],1)],1),o("v-uni-web-view",{key:n.webviewKey,attrs:{src:n.url,progress:!1,"webview-styles":{progress:{color:"#007aff"},titleNView:{buttons:[]}}},on:{message:function(e){arguments[0]=e=n.$handleEvent(e),n.handleMessage.apply(void 0,arguments)},error:function(e){arguments[0]=e=n.$handleEvent(e),n.handleError.apply(void 0,arguments)},loading:function(e){arguments[0]=e=n.$handleEvent(e),n.handleLoading.apply(void 0,arguments)},navigation:function(e){arguments[0]=e=n.$handleEvent(e),n.handleNavigation.apply(void 0,arguments)},redirect:function(e){arguments[0]=e=n.$handleEvent(e),n.handleRedirect.apply(void 0,arguments)}}}),n.loading?o("v-uni-view",{staticClass:"loading-overlay"},[o("v-uni-view",{staticClass:"loading-content"},[o("v-uni-text",{staticClass:"loading-text"},[n._v("正在加载...")])],1)],1):n._e()],1)},i=[]},"1fe1":function(n,e,o){"use strict";var t=o("7018"),i=o.n(t);i.a},6423:function(n,e,o){"use strict";o.r(e);var t=o("14f5"),i=o("646c");for(var a in i)["default"].indexOf(a)<0&&function(n){o.d(e,n,(function(){return i[n]}))}(a);o("1fe1");var c=o("828b"),s=Object(c["a"])(i["default"],t["b"],t["c"],!1,null,"3f7c91b2",null,!1,t["a"],void 0);e["default"]=s.exports},"646c":function(n,e,o){"use strict";o.r(e);var t=o("0c62"),i=o.n(t);for(var a in t)["default"].indexOf(a)<0&&function(n){o.d(e,n,(function(){return t[n]}))}(a);e["default"]=i.a},7018:function(n,e,o){var t=o("0aab");t.__esModule&&(t=t.default),"string"===typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);var i=o("967d").default;i("6ee2ed6a",t,!0,{sourceMap:!1,shadowMode:!1})}}]);